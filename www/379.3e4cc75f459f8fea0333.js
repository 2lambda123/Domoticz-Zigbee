(self.webpackChunkzigate_plugin=self.webpackChunkzigate_plugin||[]).push([[379],{5379:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AdminModule:()=>te});var n=i(5425),r=i(3548),s=i(2548),a=i(4079),c=i(1572),o=i(1511),u=i(2132),l=i(436),d=i(9996),p=i(5181),m=i(3957),_=i(9774),Z=i(2589),U=i(2582);function g(e,t){if(1&e&&(c.TgZ(0,"span",25),c._uU(1),c.ALo(2,"translate"),c.TgZ(3,"b"),c._uU(4),c.qZA(),c._uU(5,"\n              "),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij("\n                - ",c.lcZ(2,3,"admin.assistprovisionning.alert.cluster"),"\xa0"),c.xp6(3),c.AsE("",e.ClusterId," (",e.ClusterDesc,")")}}function v(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.ALo(2,"translate"),c.TgZ(3,"b"),c._uU(4),c.qZA(),c._uU(5,"\n              "),c.YNc(6,g,6,5,"span",24),c._uU(7,"\n            "),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij("\n              ",c.lcZ(2,3,"admin.assistprovisionning.alert.ep"),"\xa0"),c.xp6(3),c.Oqu(e.Ep),c.xp6(2),c.Q6J("ngForOf",e.Clusters)}}function h(e,t){if(1&e&&(c.TgZ(0,"div",20),c._uU(1,"\n      "),c.TgZ(2,"fieldset",21),c._uU(3,"\n        "),c.TgZ(4,"div",22),c._uU(5,"\n          "),c.TgZ(6,"div",6),c._uU(7),c.ALo(8,"translate"),c.TgZ(9,"b"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c._uU(12,"\n          "),c.qZA(),c._uU(13,"\n          "),c.TgZ(14,"div",6),c._uU(15),c.ALo(16,"translate"),c.TgZ(17,"b"),c._uU(18),c.qZA(),c._uU(19,"\n          "),c.qZA(),c._uU(20,"\n          "),c.TgZ(21,"div",6),c._uU(22),c.ALo(23,"translate"),c.TgZ(24,"b"),c._uU(25),c.qZA(),c._uU(26,"\n          "),c.qZA(),c._uU(27,"\n          "),c.TgZ(28,"div",6),c._uU(29),c.ALo(30,"translate"),c.TgZ(31,"b"),c._uU(32),c.qZA(),c._uU(33,"\n          "),c.qZA(),c._uU(34,"\n          "),c.TgZ(35,"div",6),c._uU(36),c.ALo(37,"translate"),c.TgZ(38,"b"),c._uU(39),c.qZA(),c._uU(40,"\n          "),c.qZA(),c._uU(41,"\n          "),c.TgZ(42,"div",6),c._uU(43),c.ALo(44,"translate"),c.TgZ(45,"b"),c._uU(46),c.qZA(),c._uU(47,"\n          "),c.qZA(),c._uU(48,"\n          "),c.TgZ(49,"div",6),c._uU(50),c.ALo(51,"translate"),c.TgZ(52,"b"),c._uU(53),c.qZA(),c._uU(54,"\n          "),c.qZA(),c._uU(55,"\n          "),c.TgZ(56,"div",6),c._uU(57,"\n            "),c.YNc(58,v,8,5,"div",23),c._uU(59,"\n          "),c.qZA(),c._uU(60,"\n          "),c.TgZ(61,"div",6),c._uU(62),c.ALo(63,"translate"),c.TgZ(64,"b"),c._uU(65),c.qZA(),c._uU(66,"\n          "),c.qZA(),c._uU(67,"\n        "),c.qZA(),c._uU(68,"\n      "),c.qZA(),c._uU(69,"\n    "),c.qZA()),2&e){const e=t.$implicit;c.xp6(7),c.hij("\n            ",c.lcZ(8,20,"admin.assistprovisionning.alert.state"),"\xa0"),c.xp6(3),c.AsE("",e.ProvisionStatus," (",c.lcZ(11,22,"admin.assistprovisionning.alert."+e.ProvisionStatus),")"),c.xp6(5),c.hij("\n            ",c.lcZ(16,24,"admin.assistprovisionning.alert.nwkid"),"\xa0"),c.xp6(3),c.Oqu(e.NwkId),c.xp6(4),c.hij("\n            ",c.lcZ(23,26,"admin.assistprovisionning.alert.ieee"),"\xa0"),c.xp6(3),c.Oqu(e.IEEE),c.xp6(4),c.hij("\n            ",c.lcZ(30,28,"admin.assistprovisionning.alert.profile"),"\xa0"),c.xp6(3),c.AsE("",e.ProfileId," (",e.ProfileIdDesc,")"),c.xp6(4),c.hij("\n            ",c.lcZ(37,30,"admin.assistprovisionning.alert.device"),"\xa0"),c.xp6(3),c.AsE("",e.ZDeviceID," (",e.ZDeviceIDDesc,")"),c.xp6(4),c.hij("\n            ",c.lcZ(44,32,"admin.assistprovisionning.alert.model"),"\xa0"),c.xp6(3),c.Oqu(e.Model),c.xp6(4),c.hij("\n            ",c.lcZ(51,34,"admin.assistprovisionning.alert.plugincertified"),"\xa0"),c.xp6(3),c.Oqu(e.PluginCertified),c.xp6(5),c.Q6J("ngForOf",e.Ep),c.xp6(4),c.hij("\n            ",c.lcZ(63,36,"admin.assistprovisionning.alert.widgets"),"\xa0"),c.xp6(3),c.Oqu(null==e||null==e.device?null:e.device.WidgetList)}}function f(e,t){if(1&e&&(c._uU(0,"\n  "),c.TgZ(1,"div",9),c._uU(2,"\n    "),c._UZ(3,"h4",10),c._uU(4,"\n    "),c.TgZ(5,"button",11),c.NdJ("click",function(){return t.$implicit.close("cancel")}),c._uU(6,"\n      "),c.TgZ(7,"span",12),c._uU(8,"\xd7"),c.qZA(),c._uU(9,"\n    "),c.qZA(),c._uU(10,"\n  "),c.qZA(),c._uU(11,"\n\n  "),c.TgZ(12,"div",13),c._uU(13,"\n    "),c._UZ(14,"ngx-spinner",14),c._uU(15,"\n  "),c.qZA(),c._uU(16,"\n  "),c.TgZ(17,"div",15),c._uU(18,"\n    "),c._UZ(19,"span",16),c._uU(20,"\n    "),c.YNc(21,h,70,38,"div",17),c._uU(22,"\n  "),c.qZA(),c._uU(23,"\n  "),c.TgZ(24,"div",18),c._uU(25,"\n    "),c.TgZ(26,"button",19),c.NdJ("click",function(){return t.$implicit.close("cancel")}),c.qZA(),c._uU(27,"\n  "),c.qZA(),c._uU(28,"\n")),2&e){const e=c.oxw();c.xp6(14),c.Q6J("fullScreen",!1),c.xp6(7),c.Q6J("ngForOf",e.devicePaired)}}new s.Yd("PermitToJoinComponent");let b=(()=>{class e extends a.n{constructor(e,t,i,n){super(),this.toastr=e,this.apiService=t,this.modalService=i,this.spinner=n}ngOnInit(){this.newDevices=null,this.devices=null,this.devicePaired=[]}open(e){this.newDevices=null,this.devices=null,this.devicePaired=[],this.spinner.show(),this.subs.sink=this.apiService.getNewHardware(!0).pipe((0,l.b)(()=>(0,u.H)(0,1e4).pipe((0,l.b)(()=>this.apiService.getReceiveNewHardware())).pipe((0,d.U)(e=>{this.newDevices=e,this.newDevices.NewDevices&&this.newDevices.NewDevices.length>0&&this.createwidgets()})))).subscribe(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg",backdrop:"static",keyboard:!1}).result.then(e=>{this.spinner.hide(),this.apiService.getNewHardware(!1).subscribe(),this.subs.unsubscribe()},e=>{})}createwidgets(){this.newDevices.NewDevices.forEach(e=>{e.ProvisionStatus&&this.apiService.getZDeviceName().subscribe(t=>{this.devices=t,e.device=this.devices.find(t=>t._NwkId===e.NwkId),this.devicePaired.push(e)})})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p._W),c.Y36(m.s),c.Y36(_.FF),c.Y36(Z.t2))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-assist-provisionning"]],features:[c.qOj],decls:25,vars:3,consts:[[1,"col-sm"],[1,"card"],["translate","admin.assistprovisionning.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],[1,"row"],["translate","admin.assistprovisionning.go.button",1,"ml-3","btn","btn-primary",3,"click"],["content",""],[1,"modal-header"],["id","modal-basic-title","translate","admin.assistprovisionning.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","mt-3"],["type","line-scale","size","medium","bdColor","white","color","red",3,"fullScreen"],[1,"modal-body"],["translate","admin.assistprovisionning.alert.subject",1,"row","ml-2"],["class","mt-1",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","translate","admin.assistprovisionning.alert.cancel",1,"btn","btn-primary",3,"click"],[1,"mt-1"],[1,"border","p-2"],[1,"ml-2"],[4,"ngFor","ngForOf"],["class","ml-2 row",4,"ngFor","ngForOf"],[1,"ml-2","row"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c._UZ(4,"div",2),c._uU(5,"\n    "),c.TgZ(6,"div",3),c._uU(7,"\n      "),c._UZ(8,"h5",4),c.ALo(9,"translate"),c._uU(10,"\n      "),c.TgZ(11,"div",5),c._uU(12,"\n        "),c.TgZ(13,"div",6),c._uU(14,"\n          "),c.TgZ(15,"button",7),c.NdJ("click",function(){c.CHM(e);const i=c.MAs(23);return t.open(i)}),c.qZA(),c._uU(16,"\n        "),c.qZA(),c._uU(17,"\n      "),c.qZA(),c._uU(18,"\n    "),c.qZA(),c._uU(19,"\n  "),c.qZA(),c._uU(20,"\n"),c.qZA(),c._uU(21,"\n\n"),c.YNc(22,f,29,2,"ng-template",null,8,c.W1O),c._uU(24,"\n")}2&e&&(c.xp6(8),c.Q6J("innerHTML",c.lcZ(9,1,"admin.assistprovisionning.subtitle"),c.oJD))},directives:[U.Pi,Z.Ro,o.sg],pipes:[U.X$],styles:[""]}),e})();new s.Yd("PermitToJoinComponent");let T=(()=>{class e{constructor(e,t,i){this.toastr=e,this.apiService=t,this.translate=i}ngOnInit(){this.apiService.getPermitToJoin().subscribe(e=>{this.permitToJoin=e})}updatePermitToJoin(e){this.permitToJoin.PermitToJoin=e,this.apiService.putPermitToJoin(this.permitToJoin).subscribe(e=>{this.toastr.success(this.translate.instant("api.global.succes.update.title"))})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p._W),c.Y36(m.s),c.Y36(U.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-permit-to-join"]],decls:26,vars:5,consts:[[1,"col-sm"],[1,"card"],["translate","admin.permittojoin.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],[1,"row"],["translate","admin.permittojoin.permanent.button",1,"ml-3","btn","btn-primary",3,"disabled","click"],["translate","admin.permittojoin.stop.button",1,"ml-3","btn","btn-secondary",3,"disabled","click"],["translate","admin.permittojoin.4min.button",1,"ml-3","btn","btn-success",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c._UZ(4,"div",2),c._uU(5,"\n    "),c.TgZ(6,"div",3),c._uU(7,"\n      "),c._UZ(8,"h5",4),c.ALo(9,"translate"),c._uU(10,"\n      "),c.TgZ(11,"div",5),c._uU(12,"\n        "),c.TgZ(13,"div",6),c._uU(14,"\n          "),c.TgZ(15,"button",7),c.NdJ("click",function(){return t.updatePermitToJoin(255)}),c.qZA(),c._uU(16,"\n          "),c.TgZ(17,"button",8),c.NdJ("click",function(){return t.updatePermitToJoin(0)}),c.qZA(),c._uU(18,"\n          "),c.TgZ(19,"button",9),c.NdJ("click",function(){return t.updatePermitToJoin(240)}),c.qZA(),c._uU(20,"\n        "),c.qZA(),c._uU(21,"\n      "),c.qZA(),c._uU(22,"\n    "),c.qZA(),c._uU(23,"\n  "),c.qZA(),c._uU(24,"\n"),c.qZA(),c._uU(25,"\n")),2&e&&(c.xp6(8),c.Q6J("innerHTML",c.lcZ(9,3,"admin.permittojoin.subtitle"),c.oJD),c.xp6(7),c.Q6J("disabled",255===(null==t.permitToJoin?null:t.permitToJoin.PermitToJoin)),c.xp6(2),c.Q6J("disabled",0===(null==t.permitToJoin?null:t.permitToJoin.PermitToJoin)))},directives:[U.Pi],pipes:[U.X$],styles:[""]}),e})();var A=i(3148),q=i(6073),w=i(1980),J=i(4224);function x(e,t){if(1&e&&(c._uU(0,"\n                  "),c.TgZ(1,"span",13),c._uU(2,"\n                    "),c.TgZ(3,"b"),c._uU(4,"Name"),c.qZA(),c._uU(5),c.TgZ(6,"b"),c._uU(7,"NwkId"),c.qZA(),c._uU(8),c.qZA(),c._uU(9,"\n                ")),2&e){const e=t.item,i=t.searchTerm;c.xp6(1),c.Q6J("ngOptionHighlight",i),c.xp6(4),c.hij(" : ",e.ZDeviceName," - "),c.xp6(3),c.hij(" : ",e._NwkId,"")}}new s.Yd("PermitToJoinRouterComponent");let N=(()=>{class e extends a.n{constructor(e,t,i,n){super(),this.toastr=e,this.formBuilder=t,this.apiService=i,this.translate=n}ngOnInit(){this.form=this.formBuilder.group({deviceSelected:[null,q.kI.required]}),this.subs.sink=(0,A.D)([this.apiService.getPermitToJoin(),this.apiService.getZDevices()]).subscribe(([e,t])=>{this.permitToJoin=e,this.routers=t.filter(e=>"Router"===e.LogicalType)})}updatePermitToJoin(e){this.permitToJoin.PermitToJoin=e,this.permitToJoin.Router=this.form.get("deviceSelected").value._NwkId,this.apiService.putPermitToJoin(this.permitToJoin).subscribe(e=>{this.toastr.success(this.translate.instant("api.global.succes.update.title"))})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p._W),c.Y36(q.qu),c.Y36(m.s),c.Y36(U.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-permit-to-join-router"]],features:[c.qOj],decls:42,vars:13,consts:[[1,"col-sm"],[3,"formGroup"],[1,"card"],["translate","admin.permittojoinrouter.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],[1,"row"],["bindLabel","ZDeviceName","formControlName","deviceSelected",3,"items","multiple","closeOnSelect","searchable","placeholder"],["ng-option-tmp",""],[1,"row","mt-3"],["translate","admin.permittojoin.4min.button",1,"btn","btn-success",3,"disabled","click"],["translate","admin.permittojoin.stop.button",1,"ml-3","btn","btn-secondary",3,"disabled","click"],[3,"ngOptionHighlight"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"form",1),c._uU(3,"\n    "),c.TgZ(4,"div",2),c._uU(5,"\n      "),c._UZ(6,"div",3),c._uU(7,"\n      "),c.TgZ(8,"div",4),c._uU(9,"\n        "),c._UZ(10,"h5",5),c.ALo(11,"translate"),c._uU(12,"\n        "),c.TgZ(13,"div",6),c._uU(14,"\n          "),c.TgZ(15,"div",7),c._uU(16,"\n            "),c.TgZ(17,"div",0),c._uU(18,"\n              "),c.TgZ(19,"ng-select",8),c.ALo(20,"translate"),c._uU(21,"\n                "),c.YNc(22,x,10,3,"ng-template",9),c._uU(23,"\n              "),c.qZA(),c._uU(24,"\n            "),c.qZA(),c._uU(25,"\n          "),c.qZA(),c._uU(26,"\n          "),c.TgZ(27,"div",10),c._uU(28,"\n            "),c.TgZ(29,"div",0),c._uU(30,"\n              "),c.TgZ(31,"button",11),c.NdJ("click",function(){return t.updatePermitToJoin(240)}),c.qZA(),c._uU(32,"\n              "),c.TgZ(33,"button",12),c.NdJ("click",function(){return t.updatePermitToJoin(0)}),c.qZA(),c._uU(34,"\n            "),c.qZA(),c._uU(35,"\n          "),c.qZA(),c._uU(36,"\n        "),c.qZA(),c._uU(37,"\n      "),c.qZA(),c._uU(38,"\n    "),c.qZA(),c._uU(39,"\n  "),c.qZA(),c._uU(40,"\n"),c.qZA(),c._uU(41,"\n")),2&e&&(c.xp6(2),c.Q6J("formGroup",t.form),c.xp6(8),c.Q6J("innerHTML",c.lcZ(11,9,"admin.permittojoinrouter.subtitle"),c.oJD),c.xp6(9),c.s9C("placeholder",c.lcZ(20,11,"tools.debugcommand.device")),c.Q6J("items",t.routers)("multiple",!1)("closeOnSelect",!0)("searchable",!0),c.xp6(12),c.Q6J("disabled",!t.form.valid),c.xp6(2),c.Q6J("disabled",0===(null==t.permitToJoin?null:t.permitToJoin.PermitToJoin)))},directives:[q._Y,q.JL,q.sg,U.Pi,w.w9,q.JJ,q.u,w.Z2,J.s],pipes:[U.X$],styles:[""]}),e})();new s.Yd("SwResetComponent");let k=(()=>{class e{constructor(e,t,i){this.toastr=e,this.apiService=t,this.translate=i}ngOnInit(){}swReset(e){this.apiService.getSwResetZigate().subscribe(()=>{this.toastr.success(this.translate.instant("api.global.reset.zigate.title"))})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p._W),c.Y36(m.s),c.Y36(U.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sw-reset"]],decls:19,vars:3,consts:[[1,"col-sm"],[1,"card"],["translate","admin.swreset.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],["translate","admin.swreset.button",1,"ml-3","btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c._UZ(4,"div",2),c._uU(5,"\n    "),c.TgZ(6,"div",3),c._uU(7,"\n      "),c._UZ(8,"h5",4),c.ALo(9,"translate"),c._uU(10,"\n      "),c.TgZ(11,"div",5),c._uU(12,"\n        "),c.TgZ(13,"button",6),c.NdJ("click",function(e){return t.swReset(e)}),c.qZA(),c._uU(14,"\n      "),c.qZA(),c._uU(15,"\n    "),c.qZA(),c._uU(16,"\n  "),c.qZA(),c._uU(17,"\n"),c.qZA(),c._uU(18,"\n")),2&e&&(c.xp6(8),c.Q6J("innerHTML",c.lcZ(9,1,"admin.swreset.subtitle"),c.oJD))},directives:[U.Pi],pipes:[U.X$],styles:[""]}),e})();var L=i(175);function y(e,t){1&e&&(c._uU(0,"\n  "),c.TgZ(1,"div",8),c._uU(2,"\n    "),c._UZ(3,"h4",9),c._uU(4,"\n    "),c.TgZ(5,"button",10),c.NdJ("click",function(){return t.$implicit.dismiss("Cross click")}),c._uU(6,"\n      "),c.TgZ(7,"span",11),c._uU(8,"\xd7"),c.qZA(),c._uU(9,"\n    "),c.qZA(),c._uU(10,"\n  "),c.qZA(),c._uU(11,"\n  "),c._UZ(12,"div",12),c._uU(13,"\n  "),c.TgZ(14,"div",13),c._uU(15,"\n    "),c.TgZ(16,"button",14),c.NdJ("click",function(){return t.$implicit.close("erase")}),c.qZA(),c._uU(17,"\n    "),c.TgZ(18,"button",15),c.NdJ("click",function(){return t.$implicit.dismiss("cancel")}),c.qZA(),c._uU(19,"\n  "),c.qZA(),c._uU(20,"\n"))}new s.Yd("ReloadPluginComponent");let S=(()=>{class e{constructor(e,t,i,n,r){this.headerService=e,this.modalService=t,this.toastr=i,this.apiService=n,this.translate=r}ngOnInit(){}reloadPlugin(){this.apiService.getReloadPlugin().subscribe(e=>{this.toastr.success(this.translate.instant("api.global.succes.pluginrestarted.title")),this.headerService.setRestart(!1)})}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{this.reloadPlugin()},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(L.r),c.Y36(_.FF),c.Y36(p._W),c.Y36(m.s),c.Y36(U.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-reload-plugin"]],decls:22,vars:3,consts:[[1,"col-sm"],[1,"card"],["translate","admin.reloadplugin.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],["translate","admin.reloadplugin.button",1,"w-100","btn","btn-primary",3,"click"],["content",""],[1,"modal-header"],["id","modal-basic-title","translate","admin.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["translate","admin.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","admin.reloadplugin.alert.erase",1,"btn","btn-primary",3,"click"],["type","button","translate","admin.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c._UZ(4,"div",2),c._uU(5,"\n    "),c.TgZ(6,"div",3),c._uU(7,"\n      "),c._UZ(8,"h5",4),c.ALo(9,"translate"),c._uU(10,"\n      "),c.TgZ(11,"div",5),c._uU(12,"\n        "),c.TgZ(13,"button",6),c.NdJ("click",function(){c.CHM(e);const i=c.MAs(20);return t.open(i)}),c.qZA(),c._uU(14,"\n      "),c.qZA(),c._uU(15,"\n    "),c.qZA(),c._uU(16,"\n  "),c.qZA(),c._uU(17,"\n"),c.qZA(),c._uU(18,"\n\n"),c.YNc(19,y,21,0,"ng-template",null,7,c.W1O),c._uU(21,"\n")}2&e&&(c.xp6(8),c.Q6J("innerHTML",c.lcZ(9,1,"admin.reloadplugin.subtitle"),c.oJD))},directives:[U.Pi],pipes:[U.X$],styles:[""]}),e})();new s.Yd("ReloadPluginComponent");let Y=(()=>{class e{constructor(e,t,i,n){this.toastr=e,this.apiService=t,this.translate=i,this.headerService=n}ngOnInit(){}rescanGroup(){this.apiService.getRescanGroup().subscribe(()=>{this.toastr.success(this.translate.instant("admin.rescan.group.notify")),this.apiService.getRestartNeeded().subscribe(e=>{1===e.RestartNeeded&&this.headerService.setRestart(!0)})})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p._W),c.Y36(m.s),c.Y36(U.sK),c.Y36(L.r))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-rescan-group"]],decls:19,vars:3,consts:[[1,"col-sm"],[1,"card"],["translate","admin.rescan.group.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],["translate","admin.rescan.group.button",1,"ml-3","btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c._UZ(4,"div",2),c._uU(5,"\n    "),c.TgZ(6,"div",3),c._uU(7,"\n      "),c._UZ(8,"h5",4),c.ALo(9,"translate"),c._uU(10,"\n      "),c.TgZ(11,"div",5),c._uU(12,"\n        "),c.TgZ(13,"button",6),c.NdJ("click",function(){return t.rescanGroup()}),c.qZA(),c._uU(14,"\n      "),c.qZA(),c._uU(15,"\n    "),c.qZA(),c._uU(16,"\n  "),c.qZA(),c._uU(17,"\n"),c.qZA(),c._uU(18,"\n")),2&e&&(c.xp6(8),c.Q6J("innerHTML",c.lcZ(9,1,"admin.rescan.group.subtitle"),c.oJD))},directives:[U.Pi],pipes:[U.X$],styles:[""]}),e})();var O=i(3218);function I(e,t){if(1&e&&(c._uU(0,"\n              "),c.TgZ(1,"span",10),c._uU(2,"\n                "),c.TgZ(3,"b"),c._uU(4,"Widget"),c.qZA(),c._uU(5),c.TgZ(6,"b"),c._uU(7,"IEEE"),c.qZA(),c._uU(8),c.TgZ(9,"b"),c._uU(10,"Ep"),c.qZA(),c._uU(11),c.TgZ(12,"b"),c._uU(13,"Id"),c.qZA(),c._uU(14),c.TgZ(15,"b"),c._uU(16),c.qZA(),c._uU(17,"\n              "),c.qZA(),c._uU(18,"\n            ")),2&e){const e=t.item,i=t.searchTerm;c.xp6(1),c.Q6J("ngOptionHighlight",i),c.xp6(4),c.hij(" : ",e.Name," - "),c.xp6(3),c.hij(" : ",e.IEEE," - "),c.xp6(3),c.hij(" : ",e.Ep," -\n                "),c.xp6(3),c.hij(" : ",e._ID," -\n                "),c.xp6(2),c.Oqu(e.ZDeviceName)}}new s.Yd("ReloadPluginComponent");let D=(()=>{class e{constructor(e,t,i,n){this.toastr=e,this.apiService=t,this.translate=i,this.formBuilder=n}ngOnInit(){this.form=this.formBuilder.group({deviceSelected:[null,q.kI.required]}),this.apiService.getZGroupDevicesAvalaible().subscribe(e=>{const t=[];e&&e.length>0&&(e.forEach(e=>{e.WidgetList.forEach(i=>{if("0000"!==e._NwkId){const n=new O.zL;n.Ep=i.Ep,n.IEEE=i.IEEE,n.Name=i.Name,n.ZDeviceName=i.ZDeviceName,n._ID=i._ID,n._NwkId=e._NwkId,t.push(n)}})}),this.devices=[...t])})}scan(){const e=[];this.form.get("deviceSelected").value.forEach(t=>e.push(t._NwkId)),this.apiService.putScanDeviceForGrp(e).subscribe(()=>{this.toastr.success(this.translate.instant("admin.scan.group.device.notify"))})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(p._W),c.Y36(m.s),c.Y36(U.sK),c.Y36(q.qu))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-scan-group-device"]],decls:28,vars:12,consts:[[1,"col-sm"],[3,"formGroup"],[1,"card"],["translate","admin.scan.group.device.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],["bindLabel","Name","formControlName","deviceSelected",3,"items","multiple","closeOnSelect","searchable","placeholder"],["ng-option-tmp",""],["translate","admin.scan.group.device.button",1,"ml-3","mt-3","btn","btn-primary",3,"disabled","click"],[3,"ngOptionHighlight"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"form",1),c._uU(3,"\n    "),c.TgZ(4,"div",2),c._uU(5,"\n      "),c._UZ(6,"div",3),c._uU(7,"\n      "),c.TgZ(8,"div",4),c._uU(9,"\n        "),c._UZ(10,"h5",5),c.ALo(11,"translate"),c._uU(12,"\n        "),c.TgZ(13,"div",6),c._uU(14,"\n          "),c.TgZ(15,"ng-select",7),c.ALo(16,"translate"),c._uU(17,"\n            "),c.YNc(18,I,19,6,"ng-template",8),c._uU(19,"\n          "),c.qZA(),c._uU(20,"\n          "),c.TgZ(21,"button",9),c.NdJ("click",function(){return t.scan()}),c.qZA(),c._uU(22,"\n        "),c.qZA(),c._uU(23,"\n      "),c.qZA(),c._uU(24,"\n    "),c.qZA(),c._uU(25,"\n  "),c.qZA(),c._uU(26,"\n"),c.qZA(),c._uU(27,"\n")),2&e&&(c.xp6(2),c.Q6J("formGroup",t.form),c.xp6(8),c.Q6J("innerHTML",c.lcZ(11,8,"admin.scan.group.device.subtitle"),c.oJD),c.xp6(5),c.s9C("placeholder",c.lcZ(16,10,"admin.scan.group.device.placeholder")),c.Q6J("items",t.devices)("multiple",!0)("closeOnSelect",!1)("searchable",!0),c.xp6(6),c.Q6J("disabled",!t.form.valid))},directives:[q._Y,q.JL,q.sg,U.Pi,w.w9,q.JJ,q.u,w.Z2,J.s],pipes:[U.X$],styles:[""]}),e})();function P(e,t){1&e&&c._UZ(0,"app-assist-provisionning")}function j(e,t){1&e&&c._UZ(0,"app-permit-to-join")}function E(e,t){1&e&&c._UZ(0,"app-permit-to-join-router")}function C(e,t){1&e&&c._UZ(0,"app-sw-reset")}function F(e,t){1&e&&c._UZ(0,"app-reload-plugin")}function Q(e,t){1&e&&c._UZ(0,"app-rescan-group")}function M(e,t){1&e&&c._UZ(0,"app-scan-group-device")}new s.Yd("AdminComponent");let H=(()=>{class e extends a.n{constructor(e){super(),this.activatedRoute=e}ngOnInit(){this.subs.sink=this.activatedRoute.queryParamMap.subscribe(e=>{this.action=e.get("action")})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(r.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-admin"]],features:[c.qOj],decls:18,vars:7,consts:[[1,"row","card-columns"],[4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.YNc(2,P,1,0,"app-assist-provisionning",1),c._uU(3,"\n  "),c.YNc(4,j,1,0,"app-permit-to-join",1),c._uU(5,"\n  "),c.YNc(6,E,1,0,"app-permit-to-join-router",1),c._uU(7,"\n  "),c.YNc(8,C,1,0,"app-sw-reset",1),c._uU(9,"\n  "),c._uU(10,"\n  "),c.YNc(11,F,1,0,"app-reload-plugin",1),c._uU(12,"\n  "),c.YNc(13,Q,1,0,"app-rescan-group",1),c._uU(14,"\n  "),c.YNc(15,M,1,0,"app-scan-group-device",1),c._uU(16,"\n"),c.qZA(),c._uU(17,"\n")),2&e&&(c.xp6(2),c.Q6J("ngIf","pairing"===t.action),c.xp6(2),c.Q6J("ngIf","pairing"===t.action),c.xp6(2),c.Q6J("ngIf","pairing"===t.action),c.xp6(2),c.Q6J("ngIf","zigate"===t.action),c.xp6(3),c.Q6J("ngIf","plugin"===t.action),c.xp6(2),c.Q6J("ngIf","group"===t.action),c.xp6(2),c.Q6J("ngIf","group"===t.action))},directives:[o.O5,b,T,N,k,S,Y,D],styles:[""]}),e})();var $=i(7701),B=i(8720);class R{}function W(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1,"\n              "),c.TgZ(2,"ng-select",16),c.ALo(3,"translate"),c._uU(4,"\n              "),c.qZA(),c._uU(5,"\n            "),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.s9C("placeholder",c.lcZ(3,4,"admin.firmware.list")),c.Q6J("items",e.firmwares)("multiple",!1)("closeOnSelect",!0)}}function X(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1,"\n              "),c.TgZ(2,"ng-select",17),c.ALo(3,"async"),c.ALo(4,"translate"),c._uU(5,"\n              "),c.qZA(),c._uU(6,"\n            "),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.s9C("placeholder",c.lcZ(4,6,"admin.firmware.devices.list")),c.Q6J("items",c.lcZ(3,4,e.devicesList$))("multiple",!0)("closeOnSelect",!0)}}function G(e,t){if(1&e&&(c.TgZ(0,"div",23),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.lnq("\n        ",c.lcZ(2,3,"admin.firmware.alert.device")," : ",e.DeviceName," - Nwkid : ",e.Nwkid,"\n      ")}}function z(e,t){if(1&e&&(c._uU(0,"\n  "),c.TgZ(1,"div",18),c._uU(2,"\n    "),c._UZ(3,"h4",19),c._uU(4,"\n    "),c.TgZ(5,"button",20),c.NdJ("click",function(){return t.$implicit.dismiss("Cross click")}),c._uU(6,"\n      "),c.TgZ(7,"span",21),c._uU(8,"\xd7"),c.qZA(),c._uU(9,"\n    "),c.qZA(),c._uU(10,"\n  "),c.qZA(),c._uU(11,"\n  "),c.TgZ(12,"div",22),c._uU(13),c.ALo(14,"translate"),c.TgZ(15,"div",23),c._uU(16),c.ALo(17,"translate"),c.qZA(),c._uU(18,"\n    "),c.TgZ(19,"div",23),c._uU(20),c.ALo(21,"translate"),c.qZA(),c._uU(22,"\n    "),c.TgZ(23,"div",23),c._uU(24),c.ALo(25,"translate"),c.YNc(26,G,3,5,"div",24),c._uU(27,"\n    "),c.qZA(),c._uU(28,"\n  "),c.qZA(),c._uU(29,"\n  "),c.TgZ(30,"div",25),c._uU(31,"\n    "),c.TgZ(32,"button",26),c.NdJ("click",function(){return t.$implicit.close("ok")}),c.qZA(),c._uU(33,"\n    "),c.TgZ(34,"button",27),c.NdJ("click",function(){return t.$implicit.dismiss("cancel")}),c.qZA(),c._uU(35,"\n  "),c.qZA(),c._uU(36,"\n")),2&e){const e=c.oxw();c.xp6(13),c.hij("\n    ",c.lcZ(14,7,"admin.firmware.alert.subject"),"\n    "),c.xp6(3),c.AsE("",c.lcZ(17,9,"admin.firmware.alert.brand")," ",e.form.get("manufacturer").value,""),c.xp6(4),c.AsE("",c.lcZ(21,11,"admin.firmware.alert.filename")," ",e.firmwareModal.FileName,""),c.xp6(4),c.hij("\n      ",c.lcZ(25,13,"admin.firmware.alert.list.devices"),"\n      "),c.xp6(2),c.Q6J("ngForOf",e.devicesModal)}}new s.Yd("BindingComponent");let K=(()=>{class e extends a.n{constructor(e,t,i,n,r){super(),this.apiService=e,this.formBuilder=t,this.translate=i,this.toastr=n,this.modalService=r}ngOnInit(){this.form=this.formBuilder.group({manufacturer:[null,q.kI.required],firmware:[null,q.kI.required],device:[null,q.kI.required],force:[!1]}),this.manufacturerList$=this.apiService.getOtaFirmware().pipe((0,d.U)(e=>(this.tempFirmwares=e[0],Object.keys(this.tempFirmwares)))),this.subs.sink=this.form.get("manufacturer").valueChanges.pipe((0,$.b)(300),(0,B.x)()).subscribe(e=>{this.form.get("firmware").reset(),this.form.get("device").reset(),e?(this.firmwares=this.tempFirmwares[e],this.firmwares.forEach(e=>{e.label=this.getLabelFirmware(e)})):this.firmwares=null}),this.subs.sink=this.form.get("firmware").valueChanges.pipe((0,$.b)(300),(0,B.x)()).subscribe(e=>{this.form.get("device").reset(),this.devicesList$=e?this.apiService.getDeviceByOtaFirmware(e.ManufCode).pipe((0,d.U)(e=>(e.forEach(e=>{e.label=this.getLabelDevice(e)}),e))):null})}updateFirmware(){const e=[],t=this.form.get("manufacturer").value,i=this.form.get("firmware").value.FileName;this.form.get("device").value.forEach(n=>{const r=new R;r.Brand=t,r.Ep=n.Ep,r.FileName=i,r.NwkId=n.Nwkid,r.ForceUpdate=this.form.get("force").value,e.push(r)}),this.apiService.putOtaFirmware(e).subscribe(()=>{this.devicesList$=null,this.firmwares=null,this.toastr.success(this.translate.instant("api.global.succes.update.title")),this.form.reset()})}open(e){this.firmwareModal=this.form.get("firmware").value,this.devicesModal=this.form.get("device").value,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{this.updateFirmware()},e=>{})}getLabelFirmware(e){return"FileName : ".concat(e.FileName).concat(" - ImageType : ").concat(e.ImageType).concat(" - ApplicationBuild : ").concat(e.ApplicationBuild).concat(" - ApplicationRelease : ").concat(e.ApplicationRelease).concat(" - StackBuild : ").concat(e.StackBuild).concat(" - StackRelease : ").concat(e.StackRelease)}getLabelDevice(e){return"DeviceName : ".concat(e.DeviceName).concat(" - Ep : ").concat(e.Ep).concat(" - Nwkid : ").concat(e.Nwkid).concat(" - OTALastTime : ").concat(e.OTALastTime).concat(" - OTAType : ").concat(e.OTAType).concat(" - OTAVersion : ").concat(e.OTAVersion).concat(" - SWBUILD_1 : ").concat(e.SWBUILD_1).concat(" - SWBUILD_3 : ").concat(e.SWBUILD_3)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(m.s),c.Y36(q.qu),c.Y36(U.sK),c.Y36(p._W),c.Y36(_.FF))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-firmware"]],features:[c.qOj],decls:62,vars:15,consts:[[1,"card"],[3,"formGroup"],["translate","admin.firmware.title",1,"card-header"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],[1,"row"],[1,"col-sm"],["appendTo","body","formControlName","manufacturer",3,"items","multiple","closeOnSelect","placeholder"],[1,"row","mt-2"],[4,"ngIf"],[1,"row","mt-2","custom-control","custom-checkbox"],["formControlName","force","id","force","type","checkbox",1,"custom-control-input","form-control"],["for","force","translate","admin.firmware.force",1,"ml-3","custom-control-label"],["translate","admin.firmware.button.update",1,"ml-3","btn","btn-primary",3,"disabled","click"],["content",""],["appendTo","body","bindLabel","label","formControlName","firmware",3,"items","multiple","closeOnSelect","placeholder"],["appendTo","body","bindLabel","label","formControlName","device",3,"items","multiple","closeOnSelect","placeholder"],[1,"modal-header"],["id","modal-basic-title","translate","admin.firmware.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-sm","mt-2"],["class","col-sm mt-2",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","translate","admin.firmware.alert.ok",1,"btn","btn-primary",3,"click"],["type","button","translate","admin.firmware.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"form",1),c._uU(3,"\n    "),c._UZ(4,"div",2),c._uU(5,"\n    "),c.TgZ(6,"div",3),c._uU(7,"\n      "),c._UZ(8,"h5",4),c.ALo(9,"translate"),c._uU(10,"\n      "),c.TgZ(11,"div",5),c._uU(12,"\n        "),c.TgZ(13,"div",6),c._uU(14,"\n          "),c.TgZ(15,"div",7),c._uU(16,"\n            "),c.TgZ(17,"div"),c._uU(18,"\n              "),c.TgZ(19,"ng-select",8),c.ALo(20,"async"),c.ALo(21,"translate"),c._uU(22,"\n              "),c.qZA(),c._uU(23,"\n            "),c.qZA(),c._uU(24,"\n          "),c.qZA(),c._uU(25,"\n        "),c.qZA(),c._uU(26,"\n        "),c.TgZ(27,"div",9),c._uU(28,"\n          "),c.TgZ(29,"div",7),c._uU(30,"\n            "),c.YNc(31,W,6,6,"div",10),c._uU(32,"\n          "),c.qZA(),c._uU(33,"\n        "),c.qZA(),c._uU(34,"\n        "),c.TgZ(35,"div",9),c._uU(36,"\n          "),c.TgZ(37,"div",7),c._uU(38,"\n            "),c.YNc(39,X,7,8,"div",10),c._uU(40,"\n          "),c.qZA(),c._uU(41,"\n        "),c.qZA(),c._uU(42,"\n        "),c.TgZ(43,"div",11),c._uU(44,"\n          "),c._UZ(45,"input",12),c._uU(46,"\n          "),c._UZ(47,"label",13),c._uU(48,"\n        "),c.qZA(),c._uU(49,"\n        "),c.TgZ(50,"div",9),c._uU(51,"\n          "),c.TgZ(52,"button",14),c.NdJ("click",function(){c.CHM(e);const i=c.MAs(60);return t.open(i)}),c.qZA(),c._uU(53,"\n        "),c.qZA(),c._uU(54,"\n      "),c.qZA(),c._uU(55,"\n    "),c.qZA(),c._uU(56,"\n  "),c.qZA(),c._uU(57,"\n"),c.qZA(),c._uU(58,"\n\n"),c.YNc(59,z,37,15,"ng-template",null,15,c.W1O),c._uU(61,"\n")}2&e&&(c.xp6(2),c.Q6J("formGroup",t.form),c.xp6(6),c.Q6J("innerHTML",c.lcZ(9,9,"admin.firmware.subtitle"),c.oJD),c.xp6(11),c.s9C("placeholder",c.lcZ(21,13,"admin.firmware.manufacturer.list")),c.Q6J("items",c.lcZ(20,11,t.manufacturerList$))("multiple",!1)("closeOnSelect",!0),c.xp6(12),c.Q6J("ngIf",t.firmwares),c.xp6(8),c.Q6J("ngIf",t.devicesList$),c.xp6(13),c.Q6J("disabled",!t.form.valid))},directives:[q._Y,q.JL,q.sg,U.Pi,w.w9,q.JJ,q.u,o.O5,q.Wl,o.sg],pipes:[U.X$,o.Ov],styles:[""]}),e})();const V=[{path:"",component:H,data:{title:(0,s.Kl)("admin")}},{path:"firmware",component:K,data:{title:(0,s.Kl)("admin.firmware")}}];let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[],imports:[[r.Bz.forChild(V)],r.Bz]}),e})(),te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[ee,n.m]]}),e})()}}]);